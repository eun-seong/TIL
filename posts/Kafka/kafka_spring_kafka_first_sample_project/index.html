<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/TIL/styles.62f334a227f3f3f958f5.css" id="gatsby-global-css">@font-face{font-family:NanumSquare;font-weight:400;src:url(/TIL/static/NanumSquareR-05c46ab6133e58f7b2ddd2b169ab6842.ttf) format("truetype")}@font-face{font-family:NanumSquare;font-weight:300;src:url(/TIL/static/NanumSquareL-f2a56a3bef1a85a94f09f8d4ffe5eb46.ttf) format("truetype")}@font-face{font-family:NanumSquare;font-weight:700;src:url(/TIL/static/NanumSquareB-e850eb664f41c0828a8aac6f1d09b643.ttf) format("truetype")}@font-face{font-family:NanumSquare;font-weight:800;src:url(/TIL/static/NanumSquareEB-9ee5085e37e8ac9dd4aa44813d9b924a.ttf) format("truetype")}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font:112.5%/1.45em georgia,serif,sans-serif;box-sizing:border-box;overflow-y:scroll;height:100%;height:-webkit-fill-available}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:rgba(0,0,0,.8);font-family:NanumSquare,georgia,serif;font-weight:600;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";line-height:1.7rem;min-height:100%;min-height:-webkit-fill-available}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}footer{background:#333;color:#fff;font-size:.88rem}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects;color:#639;transition:opacity .2s}a:active,a:hover{outline-width:0;opacity:.7}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}b,strong{font-weight:inherit;font-weight:800er}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none;max-width:100%;padding:0;margin:0 0 1.45rem}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:Fira Mono,source-code-pro,Menlo,Monaco,Consolas,Courier New,monaco,monospace;font-size:1em}address,dd,dl,figure,form,iframe,noscript,p{padding:0;margin:0 0 1.45rem}hr{border:none;border-bottom:1px solid #ddd;margin:1.45rem 0}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;padding:0;margin:0 0 1.45rem}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}*,:after,:before{box-sizing:inherit}h1,h2,h3,h4,h5,h6{margin:1.7rem 0 .8rem;padding:0;color:inherit;font-family:NanumSquare,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:800;text-rendering:optimizeLegibility;line-height:1.8}h1{font-size:1.8796rem}h2{font-size:1.62671rem}h2,h3{border-bottom:1px solid #ccc}h3{font-size:1.38rem}h4{font-size:1.234rem;margin:1.7rem 0 0}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{padding-left:1.45rem;margin:1rem 0 1.45rem;list-style-position:outside;list-style-image:none}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}.gatsby-highlight>pre{margin:0;padding:0}table{padding:0;margin:0 0 1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse}blockquote{margin:0 0 1rem;padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}b,dt,strong,th{font-weight:800}ol li,ul li{padding-left:0}li>ol{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}li>ul,ol>ul{list-style-type:circle;margin:0 0 1.45rem;padding-left:1.45rem}blockquote :last-child,li>p,p :last-child{margin-bottom:0}code{font-family:Fira Mono,source-code-pro,Menlo,Monaco,Consolas,Courier New,monaco,monospace;font-size:.85rem;line-height:1.45rem}li>code,p>code,td>code,tr>code{color:#639;font-weight:400;text-align:center;margin:auto}h1>code,h2>code,h3>code,h4>code{color:#639;font-weight:700;line-height:1.45rem;font-size:inherit}kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(102,51,153,.1);border-radius:3px;font-family:Fira Mono,source-code-pro,Menlo,Monaco,Consolas,Courier New,NanumSquare,SFMono-Regular,Roboto Mono,Droid Sans Mono,Liberation Mono,Courier,monospace;font-weight:400;padding:.1rem .2em}pre code{font-family:Fira Mono,source-code-pro,Menlo,Monaco,Consolas,Courier New;background:none;line-height:1.42}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%}.grvsc-line,.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter:before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty:after{content:" ";-webkit-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line:before{content:" ";position:absolute;width:100%}.grvsc-line-diff-add:before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del:before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}</style><meta name="generator" content="Gatsby 2.30.1"/><link rel="sitemap" type="application/xml" href="/TIL/sitemap.xml"/><style data-styled="" data-styled-version="5.2.1">.guKKsR{z-index:1;position:-webkit-sticky;position:sticky;top:0;background:rebeccapurple;margin-bottom:calc(1.45rem + 20px);}/*!sc*/
data-styled.g1[id="Header__HeaderDiv-sc-1vfx1sm-0"]{content:"guKKsR,"}/*!sc*/
.bpFSUG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 auto;max-width:960px;padding:1.2rem 1.0875rem;}/*!sc*/
data-styled.g2[id="Header__HeaderBar-sc-1vfx1sm-1"]{content:"bpFSUG,"}/*!sc*/
.hWrfJA{color:white;-webkit-text-decoration:none;text-decoration:none;margin:0 0.6rem;-webkit-transition:opacity 0.2s;transition:opacity 0.2s;}/*!sc*/
.hWrfJA:hover{opacity:0.6;}/*!sc*/
data-styled.g3[id="Header__SLink-sc-1vfx1sm-2"]{content:"hWrfJA,"}/*!sc*/
.hOtjUF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}/*!sc*/
data-styled.g4[id="Header__Menu-sc-1vfx1sm-3"]{content:"hOtjUF,"}/*!sc*/
.bKahjr{margin-top:auto;}/*!sc*/
data-styled.g5[id="Footer__Container-z0o2kh-0"]{content:"bKahjr,"}/*!sc*/
.cqsjTS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 auto;max-width:48rem;padding:1rem;}/*!sc*/
data-styled.g6[id="Footer__Wrapper-z0o2kh-1"]{content:"cqsjTS,"}/*!sc*/
.fkfjZC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g7[id="Footer__Icons-z0o2kh-2"]{content:"fkfjZC,"}/*!sc*/
.dZetdL{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:#fff;margin:0 10px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
data-styled.g8[id="Footer__Link-z0o2kh-3"]{content:"dZetdL,"}/*!sc*/
.efVmPa{z-index:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g9[id="Divider__Container-ciuwsj-0"]{content:"efVmPa,"}/*!sc*/
.fSYEeS{position:relative;top:20px;width:40%;height:1px;background:#ddd;}/*!sc*/
data-styled.g10[id="Divider__Line-ciuwsj-1"]{content:"fSYEeS,"}/*!sc*/
.dzwGfr{width:0;height:0;border:10px solid transparent;border-bottom-color:#ddd;position:relative;top:0px;}/*!sc*/
.dzwGfr:after{content:'';position:absolute;left:-10px;top:10px;width:0;height:0;border:10px solid transparent;border-top-color:#ddd;}/*!sc*/
data-styled.g11[id="Divider__Diamond-ciuwsj-2"]{content:"dzwGfr,"}/*!sc*/
.hDTxu{width:0;height:0;border:8px solid transparent;border-bottom-color:#fff;position:relative;top:-16px;}/*!sc*/
.hDTxu:after{content:'';position:absolute;left:-8px;top:8px;width:0;height:0;border:8px solid transparent;border-top-color:#fff;}/*!sc*/
data-styled.g12[id="Divider__SubDiamond-ciuwsj-3"]{content:"hDTxu,"}/*!sc*/
.dLSnnn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}/*!sc*/
data-styled.g13[id="layout__Wrapper-sc-1jer9s0-0"]{content:"dLSnnn,"}/*!sc*/
.gVrKgq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-justify:center;text-align:center;margin-top:0;margin-bottom:1.45rem;color:rebeccapurple;}/*!sc*/
data-styled.g15[id="layout__PostTitle-sc-1jer9s0-2"]{content:"gVrKgq,"}/*!sc*/
.SJEbM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;width:100%;max-width:48rem;padding:1rem;}/*!sc*/
data-styled.g16[id="layout__Main-sc-1jer9s0-3"]{content:"SJEbM,"}/*!sc*/
.bJxuXl{color:#aaa;font-size:0.8rem;margin:1rem 0 3rem 2rem;}/*!sc*/
data-styled.g26[id="PostTemplate__Date-sc-1i2kdhp-0"]{content:"bJxuXl,"}/*!sc*/
</style><title data-react-helmet="true"></title><link rel="icon" href="/TIL/favicon-32x32.png?v=fe3dcf75e7489e6375dbe0d12f8135e7" type="image/png"/><link rel="manifest" href="/TIL/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/TIL/icons/icon-48x48.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="72x72" href="/TIL/icons/icon-72x72.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="96x96" href="/TIL/icons/icon-96x96.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="144x144" href="/TIL/icons/icon-144x144.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="192x192" href="/TIL/icons/icon-192x192.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="256x256" href="/TIL/icons/icon-256x256.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="384x384" href="/TIL/icons/icon-384x384.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="apple-touch-icon" sizes="512x512" href="/TIL/icons/icon-512x512.png?v=fe3dcf75e7489e6375dbe0d12f8135e7"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/TIL/webpack-runtime-86c1dec773bdc99504f6.js"/><link as="script" rel="preload" href="/TIL/framework-305b3707783ccc9d7ca6.js"/><link as="script" rel="preload" href="/TIL/styles-83801f3b4dd3459a4027.js"/><link as="script" rel="preload" href="/TIL/app-d3f43ea3718d214a5aea.js"/><link as="script" rel="preload" href="/TIL/commons-8af4512f3b6a1a208031.js"/><link as="script" rel="preload" href="/TIL/component---src-templates-post-template-tsx-96485d1ac873825498a1.js"/><link as="fetch" rel="preload" href="/TIL/page-data/posts/Kafka/kafka_spring_kafka_first_sample_project/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/TIL/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/TIL/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__Wrapper-sc-1jer9s0-0 dLSnnn"><header class="Header__HeaderDiv-sc-1vfx1sm-0 guKKsR"><div class="Header__HeaderBar-sc-1vfx1sm-1 bpFSUG"><a class="Header__SLink-sc-1vfx1sm-2 hWrfJA" href="/TIL/">dev_eun</a><div class="Header__Menu-sc-1vfx1sm-3 hOtjUF"><a class="Header__SLink-sc-1vfx1sm-2 hWrfJA" href="/TIL/posts">Posts</a><a class="Header__SLink-sc-1vfx1sm-2 hWrfJA" href="/TIL/about">About</a></div></div></header><div class="layout__Main-sc-1jer9s0-3 SJEbM"><h1 class="layout__PostTitle-sc-1jer9s0-2 gVrKgq">spring kafka 샘플 프로젝트</h1><div class="Divider__Container-ciuwsj-0 efVmPa"><span class="Divider__Line-ciuwsj-1 fSYEeS"></span><span class="Divider__Diamond-ciuwsj-2 dzwGfr"></span><span class="Divider__SubDiamond-ciuwsj-3 hDTxu"></span></div><div class="PostTemplate__Date-sc-1i2kdhp-0 bJxuXl">Jan 26, 2021</div><div><ul>
<li><a href="https://github.com/eun-seong/spring-kafka-demo">Github Repo</a></li>
</ul>
<h4>실행 방법</h4>
<ol>
<li>
<p>kafka 실행   </p>
<pre class="grvsc-container default-dark" data-language="shell" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ bin/zookeeper-server-start.sh config/zookeeper.properties</span></span>
<span class="grvsc-line"><span class="grvsc-source">$ bin/kafka-server-start.sh config/server.properties</span></span></code></pre>
</li>
<li>
<p>스프링 서버 실행   </p>
<pre class="grvsc-container default-dark" data-language="shell" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ mvn spring-boot:run</span></span>
<span class="grvsc-line"><span class="grvsc-source">$ curl http://localhost:8080/start</span></span></code></pre>
</li>
</ol>
<hr>
<h3>Spring Reactor</h3>
<ul>
<li><code>Mono</code> : 한 개의 값을 전달하는 reactor 객체</li>
<li>
<p><a href="https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.htm"><code>Flux</code></a> : 여러 개의 값을 전달하는 reactor 객체</p>
<ul>
<li><code>map()</code> : <code>Flux</code> 데이터를 1-1 방식으로 변환한다. 인자로는 <code>Flux</code>의 타입을 받는다.</li>
<li><code>flatMap()</code> : <code>Flux</code> 데이터를 1-N 방식으로 변환하여 시퀀스를 생성한다. 인자로는 <code>Flux</code>의 타입을 받는다.</li>
<li><code>donOnNext()</code> : <code>Flux</code>가 Subscriber에 next 신호를 발생할 때 호출된다. 인자로는 <code>Flux</code>의 타입을 받는다.</li>
</ul>
</li>
</ul>
<h3><code>pom.xml</code></h3>
<details>
<summary>Code 보기</summary>
<pre class="grvsc-container default-dark" data-language="xml" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk17">&lt;?</span><span class="mtk4">xml</span><span class="mtk12"> version</span><span class="mtk1">=</span><span class="mtk8">&quot;1.0&quot;</span><span class="mtk12"> encoding</span><span class="mtk1">=</span><span class="mtk8">&quot;UTF-8&quot;</span><span class="mtk17">?&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk17">&lt;</span><span class="mtk4">project</span><span class="mtk1"> </span><span class="mtk12">xmlns</span><span class="mtk1">=</span><span class="mtk8">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span class="mtk1"> </span><span class="mtk12">xmlns:xsi</span><span class="mtk1">=</span><span class="mtk8">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">         </span><span class="mtk12">xsi:schemaLocation</span><span class="mtk1">=</span><span class="mtk8">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">modelVersion</span><span class="mtk17">&gt;</span><span class="mtk1">4.0.0</span><span class="mtk17">&lt;/</span><span class="mtk4">modelVersion</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">parent</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.springframework.boot</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">spring-boot-starter-parent</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">version</span><span class="mtk17">&gt;</span><span class="mtk1">2.2.1.RELEASE</span><span class="mtk17">&lt;/</span><span class="mtk4">version</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">relativePath</span><span class="mtk17">/&gt;</span><span class="mtk1"> </span><span class="mtk3">&lt;!-- lookup parent from repository --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">parent</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">com.nhn.forward2019</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">reactive-kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">version</span><span class="mtk17">&gt;</span><span class="mtk1">0.0.1-SNAPSHOT</span><span class="mtk17">&lt;/</span><span class="mtk4">version</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">name</span><span class="mtk17">&gt;</span><span class="mtk1">reactive-kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">name</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">description</span><span class="mtk17">&gt;</span><span class="mtk1">Demo project for Spring Boot</span><span class="mtk17">&lt;/</span><span class="mtk4">description</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">properties</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">java.version</span><span class="mtk17">&gt;</span><span class="mtk1">11</span><span class="mtk17">&lt;/</span><span class="mtk4">java.version</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">properties</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">dependencies</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.springframework.boot</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">spring-boot-starter-webflux</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk3">&lt;!-- https://mvnrepository.com/artifact/io.projectreactor.kafka/reactor-kafka --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">io.projectreactor.kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">reactor-kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">version</span><span class="mtk17">&gt;</span><span class="mtk1">1.2.0.RELEASE</span><span class="mtk17">&lt;/</span><span class="mtk4">version</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk3">&lt;!-- https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka-test --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.springframework.kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">spring-kafka</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">version</span><span class="mtk17">&gt;</span><span class="mtk1">2.3.3.RELEASE</span><span class="mtk17">&lt;/</span><span class="mtk4">version</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.springframework.boot</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">spring-boot-starter-test</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">scope</span><span class="mtk17">&gt;</span><span class="mtk1">test</span><span class="mtk17">&lt;/</span><span class="mtk4">scope</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">exclusions</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk17">&lt;</span><span class="mtk4">exclusion</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                    </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.junit.vintage</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                    </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">junit-vintage-engine</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk17">&lt;/</span><span class="mtk4">exclusion</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;/</span><span class="mtk4">exclusions</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">io.projectreactor</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">reactor-test</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">scope</span><span class="mtk17">&gt;</span><span class="mtk1">test</span><span class="mtk17">&lt;/</span><span class="mtk4">scope</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">dependency</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">dependencies</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">build</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">plugins</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk4">plugin</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk17">&lt;</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span><span class="mtk1">org.springframework.boot</span><span class="mtk17">&lt;/</span><span class="mtk4">groupId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk17">&lt;</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span><span class="mtk1">spring-boot-maven-plugin</span><span class="mtk17">&lt;/</span><span class="mtk4">artifactId</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;/</span><span class="mtk4">plugin</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;/</span><span class="mtk4">plugins</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">build</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk17">&lt;/</span><span class="mtk4">project</span><span class="mtk17">&gt;</span></span></span></code></pre>
</details>
<ul>
<li>
<p>io.projectreactor.kafka:reactor-kafka</p>
<ul>
<li>1.2.0.RELEASE</li>
</ul>
</li>
<li>
<p>org.springframework.kafka:spring-kafka</p>
<ul>
<li>2.3.3.RELEASE</li>
</ul>
</li>
<li>org.springframework.boot:spring-boot-starter-test</li>
</ul>
<h3><code>KafkaManager</code></h3>
<details>
<summary>Code 보기</summary>
<pre class="grvsc-container default-dark" data-language="java" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk10">Component</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">KafkaManager</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">static</span><span class="mtk1"> </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">String</span><span class="mtk1"> </span><span class="mtk12">BOOTSTRAP_SERVERS</span><span class="mtk1"> = </span><span class="mtk8">&quot;localhost:9092&quot;</span><span class="mtk1">;   </span><span class="mtk3">// kafka host</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Map</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">Object</span><span class="mtk1">&gt; </span><span class="mtk12">consumerProps</span><span class="mtk1">;                    </span><span class="mtk3">// consumer settings</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Map</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">Object</span><span class="mtk1">&gt; </span><span class="mtk12">producerProps</span><span class="mtk1">;                    </span><span class="mtk3">// producer settings</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk11">KafkaManager</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">consumerProps</span><span class="mtk1"> = </span><span class="mtk12">Map</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">BOOTSTRAP_SERVERS_CONFIG</span><span class="mtk1">, BOOTSTRAP_SERVERS,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">CLIENT_ID_CONFIG</span><span class="mtk1">, </span><span class="mtk8">&quot;consumer&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">GROUP_ID_CONFIG</span><span class="mtk1">, </span><span class="mtk8">&quot;group&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">KEY_DESERIALIZER_CLASS_CONFIG</span><span class="mtk1">, </span><span class="mtk12">StringDeserializer</span><span class="mtk1">.</span><span class="mtk12">class</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">VALUE_DESERIALIZER_CLASS_CONFIG</span><span class="mtk1">, </span><span class="mtk12">StringDeserializer</span><span class="mtk1">.</span><span class="mtk12">class</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ConsumerConfig</span><span class="mtk1">.</span><span class="mtk12">AUTO_OFFSET_RESET_CONFIG</span><span class="mtk1">, </span><span class="mtk8">&quot;earliest&quot;</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">producerProps</span><span class="mtk1"> = </span><span class="mtk12">Map</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ProducerConfig</span><span class="mtk1">.</span><span class="mtk12">BOOTSTRAP_SERVERS_CONFIG</span><span class="mtk1">, BOOTSTRAP_SERVERS,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ProducerConfig</span><span class="mtk1">.</span><span class="mtk12">CLIENT_ID_CONFIG</span><span class="mtk1">, </span><span class="mtk8">&quot;producer&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ProducerConfig</span><span class="mtk1">.</span><span class="mtk12">ACKS_CONFIG</span><span class="mtk1">, </span><span class="mtk8">&quot;all&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ProducerConfig</span><span class="mtk1">.</span><span class="mtk12">KEY_SERIALIZER_CLASS_CONFIG</span><span class="mtk1">, </span><span class="mtk12">StringSerializer</span><span class="mtk1">.</span><span class="mtk12">class</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">ProducerConfig</span><span class="mtk1">.</span><span class="mtk12">VALUE_SERIALIZER_CLASS_CONFIG</span><span class="mtk1">, </span><span class="mtk12">StringSerializer</span><span class="mtk1">.</span><span class="mtk12">class</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Flux</span><span class="mtk1">&lt;</span><span class="mtk10">SenderResult</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk11">producer</span><span class="mtk1">(</span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Publisher</span><span class="mtk1">&lt;</span><span class="mtk4">?</span><span class="mtk1"> </span><span class="mtk4">extends</span><span class="mtk1"> </span><span class="mtk10">SenderRecord</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk12">publisher</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">SenderOptions</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk12">options</span><span class="mtk1"> = </span><span class="mtk12">SenderOptions</span><span class="mtk1">.</span><span class="mtk11">create</span><span class="mtk1">(producerProps);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">KafkaSender</span><span class="mtk1">.</span><span class="mtk11">create</span><span class="mtk1">(options)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">send</span><span class="mtk1">(publisher);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Flux</span><span class="mtk1">&lt;</span><span class="mtk10">ReceiverRecord</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk11">consumer</span><span class="mtk1">(</span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">String</span><span class="mtk1"> </span><span class="mtk12">topic</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">ReceiverOptions</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk12">options</span><span class="mtk1"> = ReceiverOptions.&lt;String, String&gt;</span><span class="mtk11">create</span><span class="mtk1">(consumerProps)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">subscription</span><span class="mtk1">(</span><span class="mtk12">List</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(topic));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">KafkaReceiver</span><span class="mtk1">.</span><span class="mtk11">create</span><span class="mtk1">(options)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">receive</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
</details>
<ul>
<li>
<p>ProducerConfig</p>
<ul>
<li><code>BOOTSTRAP_SERVERS_CONFIG</code> : kafka server</li>
<li><code>CLIENT_ID_CONFIG</code> : client id</li>
<li><code>ACKS_CONFIG</code> : 프로듀서가 메세지를 보내고 그 메세지를 kafka가 잘 받았는지 확인할 것인지 아닌지</li>
<li><code>KEY_SERIALIZER_CLASS_CONFIG</code> : broker에게 보낼 객체를 바이트 배열로 변환하기 위해 serializing을 한다.</li>
<li><code>VALUE_SERIALIZER_CLASS_CONFIG</code> : broker에게 보낼 객체를 바이트 배열로 변환하기 위해 serializing을 한다.</li>
</ul>
</li>
<li>
<p><a href="https://kafka.apache.org/24/javadoc/org/apache/kafka/clients/consumer/ConsumerConfig.html"><code>ConsumerConfig</code></a></p>
<ul>
<li><code>BOOTSTRAP_SERVERS_CONFIG</code> : kafka server</li>
<li><code>CLIENT_ID_CONFIG</code> : client id</li>
<li><code>GROUP_ID_CONFIG</code> : group id</li>
<li><code>KEY_DESERIALIZER_CLASS_CONFIG</code> : broker가 보낸 바이트 배열을 객체로 변환하기 위해 deserializing을 한다.</li>
<li><code>VALUE_DESERIALIZER_CLASS_CONFIG</code> : broker가 보낸 바이트 배열을 객체로 변환하기 위해 deserializing을 한다.</li>
<li>
<p><code>AUTO_OFFSET_RESET_CONFIG</code> : auto.offset.reset</p>
<ul>
<li>latest : 가장 마지막 offset부터</li>
<li>earliest : 가장 처음 offset부터</li>
<li>none : 해당 consumer group이 가져가고자 하는 topic의 consuer offset 정보가 없으면 exception을 발생시킴.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4><code>producer()</code></h4>
<ul>
<li>인자로 토픽 이름을 받아 <code>SenderOptions</code> 옵션을 생성한다.</li>
<li>
<p><code>KafkaSender.create(SenderOptions&#x3C;K,V> options)</code></p>
<ul>
<li>kafka에 레코드 시퀀스를 보내고 각 레코드의 파티션과 오프셋이 포함된 레코드 메타데이터 응답의 Flux를 반환한다.</li>
<li>응답은 각 파티션에 대해 재시도 없이 순서가 지정되지만, 다른 파티션의 응답은 요청과 다른 순서로 인터리브될 수 있댜.</li>
<li>추가 상관 관계 메타데이터는 Kafka로 전송되지 않지만 요청에 대한 응답을 일치시키기 위해 응답 Flux에 포함되어 있는 SenderRecord에서 전달될 수 있다.</li>
</ul>
</li>
</ul>
<h4><code>consumer()</code></h4>
<ul>
<li>인자로 토픽 이름을 받아 <code>ReceiverOptions</code> 옵션을 생성한다.</li>
<li>
<p><code>KafkaReceiver.create(ReceiverOptions&#x3C;K,V> options)</code></p>
<ul>
<li>레코드나 receiver에 설정된 파티션을 컨슈밍하는 Kafka receiver를 시작한다.</li>
<li>레코드는 kafka에서 소비되고 Flux에서 요청을 할 때 Flux가 반환된다.</li>
<li>Flux가 종료될 때 kafka 컨슈머도 종료된다.</li>
</ul>
</li>
</ul>
<h3>DemoController</h3>
<details>
<summary>Code 보기</summary>
<pre class="grvsc-container default-dark" data-language="java" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk10">RestController</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk10">RequestMapping</span><span class="mtk1">(</span><span class="mtk8">&quot;/&quot;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">DemoController</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk10">DemoService</span><span class="mtk1"> </span><span class="mtk12">service</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk10">AtomicBoolean</span><span class="mtk1"> </span><span class="mtk12">running</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk11">DemoController</span><span class="mtk1">(</span><span class="mtk10">DemoService</span><span class="mtk1"> </span><span class="mtk12">service</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">service</span><span class="mtk1"> = service;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">running</span><span class="mtk1"> = </span><span class="mtk15">new</span><span class="mtk1"> </span><span class="mtk11">AtomicBoolean</span><span class="mtk1">(</span><span class="mtk4">false</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    @</span><span class="mtk10">GetMapping</span><span class="mtk1">(</span><span class="mtk8">&quot;/start&quot;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Mono</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk11">start</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">running</span><span class="mtk1">.</span><span class="mtk11">compareAndSet</span><span class="mtk1">(</span><span class="mtk4">false</span><span class="mtk1">, </span><span class="mtk4">true</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk15">?</span><span class="mtk1"> </span><span class="mtk12">service</span><span class="mtk1">.</span><span class="mtk11">start</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk15">:</span><span class="mtk1"> </span><span class="mtk12">Mono</span><span class="mtk1">.</span><span class="mtk11">just</span><span class="mtk1">(</span><span class="mtk8">&quot;Already Running&quot;</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    @</span><span class="mtk10">GetMapping</span><span class="mtk1">(</span><span class="mtk8">&quot;/stop&quot;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Mono</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk11">stop</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">running</span><span class="mtk1">.</span><span class="mtk11">compareAndSet</span><span class="mtk1">(</span><span class="mtk4">true</span><span class="mtk1">, </span><span class="mtk4">false</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk15">?</span><span class="mtk1"> </span><span class="mtk12">service</span><span class="mtk1">.</span><span class="mtk11">stop</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk15">:</span><span class="mtk1"> </span><span class="mtk12">Mono</span><span class="mtk1">.</span><span class="mtk11">just</span><span class="mtk1">(</span><span class="mtk8">&quot;Not Running Now&quot;</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
</details>
<ul>
<li>
<p><code>@RestController</code></p>
<ul>
<li>View를 반환하는 <code>@Controller</code>에 Data를 반환하는 <code>@ResponseBody</code>가 추가된 어노테이션</li>
<li>json 형태로 객체 데이터를 반환한다.</li>
</ul>
</li>
<li>
<p><code>@RequestMapping({NAME})</code></p>
<ul>
<li><code>NAME</code>과 일치하는 path는 모두 해당 컨트롤러로 전달된다.</li>
</ul>
</li>
<li>
<p><code>@GetMapping({NAME})</code></p>
<ul>
<li>컨트롤러의 path 뒤에 <code>NAME</code>과 일치하는 path는 모두 해당 메소드로 전달된다.</li>
</ul>
</li>
<li>
<p><code>Atomic</code> Type</p>
<ul>
<li>멀티스레드에서 동시성 문제를 해결할 수 있는 타입이다.</li>
<li>해당 프로젝트에서는 spring 서버의 상태를 동기화하기 위해 사용되었다.</li>
</ul>
</li>
<li>콘솔에서 실행할 때 맵핑메소드가 리턴하는 값이 콘솔에 출력된다.</li>
</ul>
<h3>DemoService</h3>
<details>
<summary>Code 보기</summary>
<pre class="grvsc-container default-dark" data-language="java" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk10">Service</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">DemoService</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">static</span><span class="mtk1"> </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Logger</span><span class="mtk1"> </span><span class="mtk12">logger</span><span class="mtk1"> = </span><span class="mtk12">LoggerFactory</span><span class="mtk1">.</span><span class="mtk11">getLogger</span><span class="mtk1">(</span><span class="mtk12">DemoService</span><span class="mtk1">.</span><span class="mtk12">class</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">static</span><span class="mtk1"> </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">String</span><span class="mtk1"> </span><span class="mtk12">SERVICENAME</span><span class="mtk1"> = </span><span class="mtk8">&quot;demo&quot;</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk10">KafkaManager</span><span class="mtk1"> </span><span class="mtk12">kafkaManager</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk10">Disposable</span><span class="mtk1"> </span><span class="mtk12">disposable</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk11">DemoService</span><span class="mtk1">(</span><span class="mtk10">KafkaManager</span><span class="mtk1"> </span><span class="mtk12">kafkaManager</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">this</span><span class="mtk1">.</span><span class="mtk12">kafkaManager</span><span class="mtk1"> = kafkaManager;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Mono</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk11">start</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">consume</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">produce</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">Mono</span><span class="mtk1">.</span><span class="mtk11">just</span><span class="mtk1">(</span><span class="mtk8">&quot;START&quot;</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">public</span><span class="mtk1"> </span><span class="mtk10">Mono</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">&gt; </span><span class="mtk11">stop</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">dispose</span><span class="mtk1">(disposable);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">Mono</span><span class="mtk1">.</span><span class="mtk11">just</span><span class="mtk1">(</span><span class="mtk8">&quot;STOP&quot;</span><span class="mtk1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">void</span><span class="mtk1"> </span><span class="mtk11">dispose</span><span class="mtk1">(</span><span class="mtk10">Disposable</span><span class="mtk1"> </span><span class="mtk12">disposable</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">if</span><span class="mtk1"> (disposable != </span><span class="mtk4">null</span><span class="mtk1"> &amp;&amp; !</span><span class="mtk12">disposable</span><span class="mtk1">.</span><span class="mtk11">isDisposed</span><span class="mtk1">()) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk12">disposable</span><span class="mtk1">.</span><span class="mtk11">dispose</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">    /***** produce *****/</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">void</span><span class="mtk1"> </span><span class="mtk11">produce</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Flux</span><span class="mtk1">&lt;</span><span class="mtk10">SenderRecord</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk12">records</span><span class="mtk1"> = </span><span class="mtk11">generateSource</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">doOnNext</span><span class="mtk1">(comp </span><span class="mtk4">-&gt;</span><span class="mtk1"> </span><span class="mtk12">logger</span><span class="mtk1">.</span><span class="mtk11">info</span><span class="mtk1">(</span><span class="mtk8">&quot;Create - name: {}</span><span class="mtk6">\t</span><span class="mtk8">major: {}&quot;</span><span class="mtk1">,</span><span class="mtk12">comp</span><span class="mtk1">.</span><span class="mtk11">getT1</span><span class="mtk1">(), </span><span class="mtk12">comp</span><span class="mtk1">.</span><span class="mtk11">getT2</span><span class="mtk1">()))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">map</span><span class="mtk1">(Object</span><span class="mtk15">::</span><span class="mtk1">toString)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">map</span><span class="mtk1">(i </span><span class="mtk4">-&gt;</span><span class="mtk1"> </span><span class="mtk12">SenderRecord</span><span class="mtk1">.</span><span class="mtk11">create</span><span class="mtk1">(</span><span class="mtk15">new</span><span class="mtk1"> </span><span class="mtk10">ProducerRecord</span><span class="mtk1">&lt;&gt;(SERVICENAME, i, i), i));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">kafkaManager</span><span class="mtk1">.</span><span class="mtk11">producer</span><span class="mtk1">(records)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">subscribe</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">    /***** consume *****/</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">void</span><span class="mtk1"> </span><span class="mtk11">consume</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        disposable = </span><span class="mtk12">kafkaManager</span><span class="mtk1">.</span><span class="mtk11">consumer</span><span class="mtk1">(SERVICENAME)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">subscribe</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">    /***** general *****/</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">Flux</span><span class="mtk1">&lt;</span><span class="mtk10">Tuple2</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk11">generateSource</span><span class="mtk1">(){</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk12">Flux</span><span class="mtk1">.</span><span class="mtk11">just</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">Tuples</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span><span class="mtk8">&quot;eun&quot;</span><span class="mtk1">, </span><span class="mtk8">&quot;computer&quot;</span><span class="mtk1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">Tuples</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span><span class="mtk8">&quot;lobster&quot;</span><span class="mtk1">, </span><span class="mtk8">&quot;statistics&quot;</span><span class="mtk1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">Tuples</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span><span class="mtk8">&quot;zooho&quot;</span><span class="mtk1">, </span><span class="mtk8">&quot;computer&quot;</span><span class="mtk1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">Tuples</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span><span class="mtk8">&quot;hyeon&quot;</span><span class="mtk1">, </span><span class="mtk8">&quot;mechanical&quot;</span><span class="mtk1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk12">Tuples</span><span class="mtk1">.</span><span class="mtk11">of</span><span class="mtk1">(</span><span class="mtk8">&quot;nayng&quot;</span><span class="mtk1">, </span><span class="mtk8">&quot;electronic&quot;</span><span class="mtk1">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk11">delayElements</span><span class="mtk1">(</span><span class="mtk12">Duration</span><span class="mtk1">.</span><span class="mtk11">ofMillis</span><span class="mtk1">(</span><span class="mtk7">1000</span><span class="mtk1">));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
</details>
<ul>
<li>
<p><code>@Service</code></p>
<ul>
<li>해당 어노테이션을 붙인 클래스를 서비스가 된다.</li>
<li>컨트롤러에서 서비스를 생성자 주입한다.</li>
</ul>
</li>
<li>
<p><code>start()</code> method</p>
<ul>
<li>서버가 동작하면 <code>consume()</code>과 <code>produce()</code> 메소드르 실행한다. </li>
</ul>
</li>
</ul>
<h4><code>produce()</code></h4>
<pre class="grvsc-container default-dark" data-language="java" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">void</span><span class="mtk1"> </span><span class="mtk11">produce</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk10">Flux</span><span class="mtk1">&lt;</span><span class="mtk10">SenderRecord</span><span class="mtk1">&lt;</span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk10">String</span><span class="mtk1">&gt;&gt; </span><span class="mtk12">records</span><span class="mtk1"> = </span><span class="mtk11">generateSource</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            .</span><span class="mtk11">doOnNext</span><span class="mtk1">(comp </span><span class="mtk4">-&gt;</span><span class="mtk1"> </span><span class="mtk12">logger</span><span class="mtk1">.</span><span class="mtk11">info</span><span class="mtk1">(</span><span class="mtk8">&quot;Create - name: {}</span><span class="mtk6">\t</span><span class="mtk8">major: {}&quot;</span><span class="mtk1">,</span><span class="mtk12">comp</span><span class="mtk1">.</span><span class="mtk11">getT1</span><span class="mtk1">(), </span><span class="mtk12">comp</span><span class="mtk1">.</span><span class="mtk11">getT2</span><span class="mtk1">()))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            .</span><span class="mtk11">map</span><span class="mtk1">(Object</span><span class="mtk15">::</span><span class="mtk1">toString)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            .</span><span class="mtk11">map</span><span class="mtk1">(i </span><span class="mtk4">-&gt;</span><span class="mtk1"> </span><span class="mtk12">SenderRecord</span><span class="mtk1">.</span><span class="mtk11">create</span><span class="mtk1">(</span><span class="mtk15">new</span><span class="mtk1"> </span><span class="mtk10">ProducerRecord</span><span class="mtk1">&lt;&gt;(SERVICENAME, i, i), i));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">kafkaManager</span><span class="mtk1">.</span><span class="mtk11">producer</span><span class="mtk1">(records)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            .</span><span class="mtk11">subscribe</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<ul>
<li>
<p><code>Flux</code>가 값을 1초마다 publish한다.</p>
<ul>
<li><code>doOnNext()</code>에서 <code>Flux</code> 객체를 받아 컨슘한 후 로그를 찍는다.</li>
</ul>
</li>
<li>
<p><code>SenderRecord.create(ProducerRecord&#x3C;topic, K, V> record, T correlationMetadata)</code></p>
<ul>
<li>레코드에 카프카 토픽 파티션을 추가하는 kafka sender 객체를 생성한다.</li>
<li><code>correlationMetadata</code>는 kafka로 전송되진 않지만 <code>SenderResult</code>를 이 레코드에 일치시키기 위한 응답에 포함된 부가적인 상관 관계 메타데이터이다.</li>
</ul>
</li>
<li>
<p><code>ProducerRecord&#x3C;>(String topic, K key, V value)</code> </p>
<ul>
<li>kafka로 보낼 key/value 이다.</li>
</ul>
</li>
<li>
<p><code>kafkaManager.producer()</code>는 <code>Flux&#x3C;SenderRecord&#x3C;String, String>></code>를 반환한다.</p>
<ul>
<li><code>Flux.subscribe()</code>는 해당 <code>Flux</code>를 subscribe하고 무한대의 요구를 요청할 수 있다.</li>
</ul>
</li>
</ul>
<h4><code>consume()</code></h4>
<pre class="grvsc-container default-dark" data-language="java" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">protected</span><span class="mtk1"> </span><span class="mtk10">void</span><span class="mtk1"> </span><span class="mtk11">consume</span><span class="mtk1">() {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    disposable = </span><span class="mtk12">kafkaManager</span><span class="mtk1">.</span><span class="mtk11">consumer</span><span class="mtk1">(SERVICENAME)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            .</span><span class="mtk11">subscribe</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<ul>
<li>
<p><code>kafkaManager.producer()</code>는 <code>Flux&#x3C;ReceiverRecord&#x3C;String, String>></code>를 반환한다.</p>
<ul>
<li><code>Flux.subscribe()</code>는 해당 <code>Flux</code>를 subscribe하고 무한대의 요구를 요청할 수 있다.</li>
</ul>
</li>
</ul>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk17 { color: #808080; }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .mtk6 { color: #D7BA7D; }
  .default-dark .mtk7 { color: #B5CEA8; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div><div></div></div><footer class="Footer__Container-z0o2kh-0 bKahjr"><div class="Footer__Wrapper-z0o2kh-1 cqsjTS"><div>© <!-- -->2021<!-- -->, dev_eun</div><div class="Footer__Icons-z0o2kh-2 fkfjZC"><a href="https://github.com/eun-seong" class="Footer__Link-z0o2kh-3 dZetdL"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg></a><a href="mailto:eunseongofficial@gmail.com" class="Footer__Link-z0o2kh-3 dZetdL"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg></a><a href="https://programmer-eun.tistory.com/" class="Footer__Link-z0o2kh-3 dZetdL"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg></a><a href="https://instagram.com/eeun_seong" class="Footer__Link-z0o2kh-3 dZetdL"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg></a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-T4NZQC7Q38"></script><script>
      window.excludeGtagPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
      
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-T4NZQC7Q38', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/Kafka/kafka_spring_kafka_first_sample_project";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-d47b21a5737d9524fa70.js"],"app":["/app-d3f43ea3718d214a5aea.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-812820426087658d3ee5.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-3390edc2a38befca8b19.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-dc373524b7289b7564a8.js"],"component---src-pages-posts-tsx":["/component---src-pages-posts-tsx-1ece86d8a803f29b145c.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-fd61ab1b1ff1c090270f.js"],"component---src-templates-post-list-template-tsx":["/component---src-templates-post-list-template-tsx-da233a0df04c247588dc.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-96485d1ac873825498a1.js"]};/*]]>*/</script><script src="/TIL/polyfill-d47b21a5737d9524fa70.js" nomodule=""></script><script src="/TIL/component---src-templates-post-template-tsx-96485d1ac873825498a1.js" async=""></script><script src="/TIL/commons-8af4512f3b6a1a208031.js" async=""></script><script src="/TIL/app-d3f43ea3718d214a5aea.js" async=""></script><script src="/TIL/styles-83801f3b4dd3459a4027.js" async=""></script><script src="/TIL/framework-305b3707783ccc9d7ca6.js" async=""></script><script src="/TIL/webpack-runtime-86c1dec773bdc99504f6.js" async=""></script></body></html>